.. _tutorial_plotconc:

Plot NAME results
==========================

Follow this tutorial to plot the outputs from a previous NAME run.
First you need to login. Please follow the login instructions in the :ref:`user guide <login>`.

.. contents::
   :local:
   :depth: 2
   :backlinks: none


Select NAME-WPS Plotting Process
----------------------

Go to the ``Processes`` tab.

.. image:: ../_images/tutorial/Processes.png

Click on *Plot NAME results - Concentration* and you will get a form to enter the process parameters.

.. image:: ../_images/tutorial/plot.png

Enter the NAME Run ID to Plot
-----------------------------

The only required parameter to generate plots is the NAME run ID. This must be an ID that was generated by FAWKES from
a previous NAME-WPS process. To find the run ID, navigate to the ``Monitor`` tab and find the run you wish to plot.

.. image:: ../_images/tutorial/Monitor.png

The run ID is located within the outputs of each NAME run. Copy this value.

.. image:: ../_images/tutorial/plot_runoutcopy.png

You can then paste this value into the Plot process run ID field.

.. image:: ../_images/tutorial/plots_paste.png

If you already know the run ID that you wish to plot, enter it into the text box.

.. image:: ../_images/tutorial/plot_run.png

Should you press submit now, you will generate a plot for each time-point and output elevation within that run.


Enter Optional Parameters
------------------------

After entering the NAME run ID, there are a number of optional parameters that will change how the data is plotted.

You can summarise the data by selecting a value in the first dropdown box.
This will add the particle concentration values for each day, week or month.
The `all` option summarises all the data within this NAME run into a single plot.

.. image:: ../_images/tutorial/plot_sum.png

Instead of summarising the data, you could select one particular time-point to plot by entering a date and time into the following field.
Note that if anything is entered into this box any summary selection will be ignored.

.. image:: ../_images/tutorial/plot_time.png

You can optionally mark the release site onto the plots by ticking the checkbox.

.. image:: ../_images/tutorial/plot_mark.png

It is also possible to change the projection from the default of `cyl`, to either `npstere` or `spstere`.

.. image:: ../_images/tutorial/plot_proj.png

The plot area can be changed by selecting the minimum and maximum longitude and latitude boundaries.

.. image:: ../_images/tutorial/plot_lon.png
.. image:: ../_images/tutorial/plot_lat.png

The scale of the particle concentration can be changed by entering a minimum and maximum value. If left empty each plot
will autoscale based on the containing data.

.. image:: ../_images/tutorial/plot_conc.png

Finally, the colour scheme used can be changed from `coolwarm` to either `viridis` or `rainbow`. Note we do not recommend using
rainbow as it is not colour-blind friendly.

.. image:: ../_images/tutorial/plot_col.png

After altering any or none of these optional parameters, the plots can be created by pressing submit.

Monitor running Job
-------------------

The job is now submitted and can be monitored on the *Monitor* page:

.. image:: ../_images/tutorial/plot_monitor.png

Click on the green refresh icon to check the status of the job. You can also click on `Details` to see a running job log.

.. image:: ../_images/tutorial/plot_joblog.png

Display the outputs
-------------------

From the `Details` page, click on the *Outputs* tab to show the run outputs. In this case we have generated multiple graphs
so the results are contained within a zipped folder.

.. image:: ../_images/tutorial/plot_outputs.png

This folder can be downloaded and unzipped to view the plot files.

.. image:: ../_images/tutorial/plot_zipfile.png

Each file is a PNG plot of the data, modified according to your input options. In this tutorial we created a plot per time-point (summarise='NA')
and marked the release location.

.. image:: ../_images/tutorial/plot_plot.png







